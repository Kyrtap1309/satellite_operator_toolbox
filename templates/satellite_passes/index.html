{% extends "base.html" %} {% block title %}Satellite Pass Calculator{% endblock
%} {% block page_title %}Satellite Pass Calculator{% endblock %} {% block
content %}
<form action="{{ url_for('calculate') }}" method="post">
  <div class="row mb-4">
    <div class="col-md-12">
      <h4>Satellite Data Input</h4>
      <hr />
    </div>
    <div class="col-md-12">
      <div class="form-group mb-3">
        <label>Input Method</label>
        <div class="btn-group w-100" role="group" data-toggle="buttons">
          <input type="radio" class="btn-check" name="input_method" id="input_norad" value="norad" checked>
          <label class="btn btn-outline-primary" for="input_norad">NORAD ID</label>
          
          <input type="radio" class="btn-check" name="input_method" id="input_tle" value="tle">
          <label class="btn btn-outline-primary" for="input_tle">Manual TLE</label>
        </div>
      </div>
    </div>
    
    <!-- NORAD ID Input -->
    <div id="norad_input" class="col-md-12">
      <div class="form-group mb-3">
        <label for="norad_id">NORAD Catalog ID</label>
        <input
          type="text"
          class="form-control"
          id="norad_id"
          name="norad_id"
          value="{{ norad_id | default('') }}"
          placeholder="e.g., 25544 (ISS), 62688 (BlueBON)"
        />
        <small class="form-text text-muted">Enter NORAD ID to fetch latest TLE automatically</small>
      </div>
    </div>
    
    <!-- Manual TLE Input -->
    <div id="tle_input" style="display: none;">
      <div class="col-md-4">
        <div class="form-group mb-3">
          <label for="tle_name">Satellite Name</label>
          <input
            type="text"
            class="form-control"
            id="tle_name"
            name="tle_name"
            value="{{ tle_name | default('') }}"
            placeholder="Enter satellite name"
          />
        </div>
      </div>
      <div class="col-md-8">
        <div class="form-group mb-3">
          <label for="tle_line1">TLE Line 1</label>
          <input
            type="text"
            class="form-control"
            id="tle_line1"
            name="tle_line1"
            value="{{ tle_line1 | default('') }}"
            placeholder="Enter TLE Line 1"
          />
        </div>
      </div>
      <div class="col-md-12">
        <div class="form-group mb-3">
          <label for="tle_line2">TLE Line 2</label>
          <input
            type="text"
            class="form-control"
            id="tle_line2"
            name="tle_line2"
            value="{{ tle_line2 | default('') }}"
            placeholder="Enter TLE Line 2"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-12">
      <h4>Ground Station 1</h4>
      <hr />
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs1_name">Station Name</label>
        <input
          type="text"
          class="form-control"
          id="gs1_name"
          name="gs1_name"
          value="{{ gs1_name | default('') }}"
          placeholder="Station 1"
          required
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs1_lat">Latitude</label>
        <input
          type="number"
          step="0.001"
          class="form-control"
          id="gs1_lat"
          name="gs1_lat"
          value="{{ gs1_lat | default('') }}"
          min="-90"
          max="90"
          placeholder="0.000"
          required
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs1_lon">Longitude</label>
        <input
          type="number"
          step="0.001"
          class="form-control"
          id="gs1_lon"
          name="gs1_lon"
          value="{{ gs1_lon | default('') }}"
          min="-180"
          max="180"
          placeholder="0.000"
          required
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs1_elev">Elevation (m)</label>
        <input
          type="number"
          step="0.1"
          class="form-control"
          id="gs1_elev"
          name="gs1_elev"
          value="{{ gs1_elev | default('0') }}"
          placeholder="0.0"
          required
        />
      </div>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-12">
      <h4>Ground Station 2</h4>
      <hr />
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs2_name">Station Name</label>
        <input
          type="text"
          class="form-control"
          id="gs2_name"
          name="gs2_name"
          value="{{ gs2_name | default('') }}"
          placeholder="Station 2"
          required
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs2_lat">Latitude</label>
        <input
          type="number"
          step="0.001"
          class="form-control"
          id="gs2_lat"
          name="gs2_lat"
          value="{{ gs2_lat | default('') }}"
          min="-90"
          max="90"
          placeholder="0.000"
          required
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs2_lon">Longitude</label>
        <input
          type="number"
          step="0.001"
          class="form-control"
          id="gs2_lon"
          name="gs2_lon"
          value="{{ gs2_lon | default('') }}"
          min="-180"
          max="180"
          placeholder="0.000"
          required
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mb-3">
        <label for="gs2_elev">Elevation (m)</label>
        <input
          type="number"
          step="0.1"
          class="form-control"
          id="gs2_elev"
          name="gs2_elev"
          value="{{ gs2_elev | default('0') }}"
          placeholder="0.0"
          required
        />
      </div>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-12">
      <h4>Calculation Parameters</h4>
      <hr />
    </div>
    <div class="col-md-6">
      <div class="form-group mb-3">
        <label for="date">Date</label>
        <input
          type="date"
          class="form-control"
          id="date"
          name="date"
          value="{{ default_date | default('') }}"
          required
        />
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group mb-3">
        <label for="min_el">Minimum Elevation (degrees)</label>
        <input
          type="number"
          step="0.1"
          class="form-control"
          id="min_el"
          name="min_el"
          value="{{ min_el | default('10') }}"
          min="0"
          max="90"
          placeholder="10.0"
          required
        />
      </div>
    </div>
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-primary btn-lg">
      Calculate Passes
    </button>
  </div>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const noradRadio = document.getElementById('input_norad');
    const tleRadio = document.getElementById('input_tle');
    const noradInput = document.getElementById('norad_input');
    const tleInput = document.getElementById('tle_input');
    
    function toggleInputMethod() {
        if (noradRadio.checked) {
            noradInput.style.display = 'block';
            tleInput.style.display = 'none';
            // Clear TLE fields when switching to NORAD
            document.getElementById('tle_name').value = '';
            document.getElementById('tle_line1').value = '';
            document.getElementById('tle_line2').value = '';
        } else {
            noradInput.style.display = 'none';
            tleInput.style.display = 'block';
            // Clear NORAD field when switching to TLE
            document.getElementById('norad_id').value = '';
        }
    }
    
    noradRadio.addEventListener('change', toggleInputMethod);
    tleRadio.addEventListener('change', toggleInputMethod);
});
</script>
{% endblock %}
